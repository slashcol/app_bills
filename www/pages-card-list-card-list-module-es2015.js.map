{"version":3,"sources":["./src/app/pages/card-list/card-list.module.ts","./src/app/pages/card-list/card-list.ts","./src/app/pages/card-list/card-list.html"],"names":[],"mappings":"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","file":"pages-card-list-card-list-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CardListPage } from './card-list';\nimport { SharedModule } from '../../shared.module';\nimport { CardAddPageModule } from '../card-add/card-add.module';\n\n@NgModule({\n  declarations: [\n    CardListPage,\n  ],\n  imports: [\n    RouterModule.forChild([\n      {\n        path: '',\n        component: CardListPage\n      }\n    ]),\n    SharedModule,\n    CardAddPageModule,\n  ],\n})\nexport class CardListPageModule {}\n","import { Component, Injector } from '@angular/core';\nimport { ActionSheetController } from '@ionic/angular';\nimport { BasePage } from '../base-page/base-page';\nimport { Card } from '../../services/card';\nimport { CardAddPage } from '../card-add/card-add';\n\n@Component({\n  selector: 'page-card-list',\n  templateUrl: 'card-list.html',\n  styleUrls: ['card-list.scss']\n})\nexport class CardListPage extends BasePage {\n\n  public cards: Card[] = [];\n\n  constructor(injector: Injector,\n    private actionSheetCtrl: ActionSheetController,\n    private creditCardService: Card) {\n    super(injector);\n  }\n\n  enableMenuSwipe() {\n    return false;\n  }\n\n  async ionViewDidEnter() {\n\n    if (!this.cards.length) {\n      this.showLoadingView({ showOverlay: false });\n      this.loadData();\n    }\n\n    const title = await this.getTrans('PAYMENT');\n    this.setPageTitle(title);\n\n    this.setMetaTags({\n      title: title\n    });\n    \n  }\n\n  async loadData(event: any = {}) {\n\n    try {\n\n      this.refresher = event.target;\n\n      this.cards = await this.creditCardService.load();\n\n      if (this.cards.length) {\n        this.showContentView();\n      } else {\n        this.showEmptyView();\n      }\n\n      this.onRefreshComplete();\n\n    } catch (err) {\n      this.showErrorView();\n      this.onRefreshComplete();\n      this.translate.get('ERROR_NETWORK').subscribe((str) => this.showToast(str));\n    }\n\n  }\n\n  async presentActionSheet(card: Card) {\n\n    const str = await this.getTrans(['ACTIONS', 'REMOVE', 'CANCEL']);\n\n    const actionSheet = await this.actionSheetCtrl.create({\n      header: str.ACTIONS,\n      buttons: [{\n        icon: !this.isIos() ? 'trash' : null,\n        text: str.REMOVE,\n        handler: () => {\n          this.onDeleteCard(card);\n        }\n      },\n      {\n        icon: !this.isIos() ? 'close' : null,\n        text: str.CANCEL\n      }]\n    });\n    \n    return await actionSheet.present();\n\n  }\n\n  async onDeleteCard(card: Card) {\n\n    try {\n\n      let str = await this.translate.get('DELETE_CONFIRMATION').toPromise();\n      \n      const res = await this.showConfirm(str);\n\n      if (!res) return;\n  \n      await card.destroy();\n\n      let index = this.cards.indexOf(card);\n      if (index !== -1) this.cards.splice(index, 1);\n\n      this.showContentView();\n      this.translate.get('DELETED').subscribe(str => this.showToast(str));\n      \n    } catch (error) {\n      this.showContentView();\n      this.translate.get('ERROR_NETWORK').subscribe(str => this.showToast(str));\n    }\n\n  }\n\n  async onAddButtonTouched() {\n\n    await this.showLoadingView({ showOverlay: true });\n    \n    const modal = await this.modalCtrl.create({\n      component: CardAddPage,\n    });\n\n    await modal.present();\n\n    this.dismissLoadingView();\n\n    const { data } = await modal.onWillDismiss();\n\n    if (data) {\n      this.cards.unshift(data);\n      this.showContentView();\n    }\n  }\n}","<ion-header class=\"ion-no-border\">\n\n  <ion-toolbar fixed>\n    <ion-buttons slot=\"start\">\n      <ion-back-button></ion-back-button>\n    </ion-buttons>\n    <ion-title>{{ 'PAYMENT' | translate }}</ion-title>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"onAddButtonTouched()\">\n        <ion-icon name=\"add\" slot=\"icon-only\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n\n</ion-header>\n\n<ion-content>\n\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"loadData($event)\">\n    <ion-refresher-content pullingText=\"{{ 'PULL_TO_REFRESH' | translate }}\"\n      refreshingText=\"{{ 'REFRESHING' | translate }}\">\n    </ion-refresher-content>\n  </ion-refresher>\n\n  <ion-grid fixed>\n\n    <empty-view *ngIf=\"isErrorViewVisible\" icon=\"alert-circle-outline\" [text]=\"'ERROR_DATA' | translate\">\n    </empty-view>\n\n    <empty-view *ngIf=\"isEmptyViewVisible\" image=\"./assets/imgs/undraw_credit_card_df1m.svg\" imageWidth=\"120\"\n      [text]=\"'EMPTY_CARDS' | translate\">\n    </empty-view>\n\n    <ion-row class=\"ion-justify-content-center\" *ngIf=\"isContentViewVisible\">\n      <ion-col size-xs=\"12\" size-lg=\"9\">\n        <ion-list lines=\"none\" class=\"ion-margin-top\">\n          <ion-item class=\"radius ion-margin-bottom\" color=\"light\" *ngFor=\"let card of cards\">\n            <img src=\"./assets/imgs/{{card.formatBrand()}}.png\" width=\"40\" slot=\"start\" />\n            <ion-label>\n              <p>&#8226;&#8226;&#8226;&#8226; {{ card.last4 }}</p>\n              <ion-badge class=\"text-small\" color=\"primary\" *ngIf=\"card.isDefault\">\n                {{ 'DEFAULT' | translate }}\n              </ion-badge>\n            </ion-label>\n            <ion-button fill=\"clear\" color=\"dark\" slot=\"end\" (click)=\"onDeleteCard(card)\">\n              {{ 'DELETE' | translate }}\n            </ion-button>\n          </ion-item>\n        </ion-list>\n      </ion-col>\n    </ion-row>\n\n    <ion-row class=\"ion-margin-vertical ion-justify-content-center\" *ngIf=\"isLoadingViewVisible\">\n      <ion-col size-xs=\"12\" size-lg=\"9\">\n        <ngx-skeleton-loader count=\"12\" [theme]=\"{ 'border-radius': '0', height: '70px' }\">\n        </ngx-skeleton-loader>\n      </ion-col>\n    </ion-row>\n\n  </ion-grid>\n\n</ion-content>"],"sourceRoot":"webpack:///"}