{"version":3,"sources":["webpack:///src/app/pages/address-list/address-list.module.ts","webpack:///src/app/pages/address-list/address-list.html","webpack:///src/app/pages/address-list/address-list.ts"],"names":["AddressListPageModule","forChild","path","component","declarations","imports","AddressListPage","injector","customerAddressService","addresses","length","showLoadingView","showOverlay","loadData","getTrans","title","setPageTitle","setMetaTags","event","refresher","target","load","showContentView","showEmptyView","onRefreshComplete","showErrorView","translate","get","subscribe","str","showToast","address","toPromise","showConfirm","res","destroy","index","indexOf","splice","modalCtrl","create","modal","present","dismissLoadingView","onWillDismiss","data","unshift","onAddButtonTouched","selector","templateUrl","styleUrls"],"mappings":"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","file":"pages-address-list-address-list-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { AddressListPage } from './address-list';\nimport { SharedModule } from '../../shared.module';\nimport { AddressAddPageModule } from '../address-add/address-add.module';\n\n@NgModule({\n  declarations: [\n    AddressListPage,\n  ],\n  imports: [\n    RouterModule.forChild([\n      {\n        path: '',\n        component: AddressListPage\n      }\n    ]),\n    SharedModule,\n    AddressAddPageModule\n  ],\n})\nexport class AddressListPageModule {}\n","<ion-header class=\"ion-no-border\">\n\n  <ion-toolbar fixed>\n    <ion-buttons slot=\"start\">\n      <ion-back-button></ion-back-button>\n    </ion-buttons>\n    <ion-title>{{ 'ADDRESSES' | translate }}</ion-title>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"onAddButtonTouched()\">\n        <ion-icon name=\"add\" slot=\"icon-only\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n\n</ion-header>\n\n<ion-content>\n\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"loadData($event)\">\n    <ion-refresher-content pullingText=\"{{ 'PULL_TO_REFRESH' | translate }}\"\n      refreshingText=\"{{ 'REFRESHING' | translate }}\">\n    </ion-refresher-content>\n  </ion-refresher>\n\n  <ion-grid fixed>\n\n    <empty-view *ngIf=\"isErrorViewVisible\" icon=\"alert-circle-outline\" [text]=\"'ERROR_DATA' | translate\">\n    </empty-view>\n\n    <empty-view *ngIf=\"isEmptyViewVisible\" image=\"./assets/imgs/undraw_address_udes.svg\" imageWidth=\"120\"\n      [text]=\"'EMPTY_ADDRESSES' | translate\">\n    </empty-view>\n\n    <ion-row class=\"ion-justify-content-center\" *ngIf=\"isContentViewVisible\">\n      <ion-col size-xs=\"12\" size-lg=\"9\">\n        <ion-list lines=\"none\" class=\"ion-margin-top\">\n          <ion-item class=\"radius ion-text-wrap ion-margin-bottom\" color=\"light\" *ngFor=\"let address of addresses\">\n            <ion-icon name=\"pin\" color=\"primary\" slot=\"start\"></ion-icon>\n            <ion-label>\n              <h2 class=\"bold\">{{ address.name }}</h2>\n              <p>{{ address }}</p>\n              <p>{{ 'CONTACT_PHONE' | translate }}: {{ address.phone }}</p>\n              <ion-badge class=\"text-small\" color=\"primary\" *ngIf=\"address.isDefault\">\n                {{ 'DEFAULT' | translate }}\n              </ion-badge>\n            </ion-label>\n            <ion-button fill=\"clear\" color=\"dark\" slot=\"end\" (click)=\"onDeleteAddress(address)\">\n              {{ 'DELETE' | translate }}</ion-button>\n          </ion-item>\n        </ion-list>\n      </ion-col>\n    </ion-row>\n\n    <ion-row class=\"ion-margin-vertical ion-justify-content-center\" *ngIf=\"isLoadingViewVisible\">\n      <ion-col size-xs=\"12\" size-lg=\"9\">\n        <ngx-skeleton-loader count=\"12\" [theme]=\"{ 'border-radius': '0', height: '60px' }\">\n        </ngx-skeleton-loader>\n      </ion-col>\n    </ion-row>\n\n  </ion-grid>\n\n</ion-content>","import { Component, Injector } from '@angular/core';\nimport { BasePage } from '../base-page/base-page';\nimport { CustomerAddress } from '../../services/customer-address';\nimport { AddressAddPage } from '../address-add/address-add';\n\n@Component({\n  selector: 'page-address-list',\n  templateUrl: 'address-list.html',\n  styleUrls: ['address-list.scss']\n})\nexport class AddressListPage extends BasePage {\n\n  public addresses: CustomerAddress[] = [];\n\n  constructor(injector: Injector,\n    private customerAddressService: CustomerAddress) {\n    super(injector);\n  }\n\n  enableMenuSwipe() {\n    return false;\n  }\n\n  async ionViewDidEnter() {\n\n    if (!this.addresses.length) {\n      this.showLoadingView({ showOverlay: false });\n      this.loadData();\n    }\n\n    const title = await this.getTrans('ADDRESSES');\n    this.setPageTitle(title);\n\n    this.setMetaTags({\n      title: title\n    });\n    \n  }\n\n  async loadData(event: any = {}) {\n\n    try {\n\n      this.refresher = event.target;\n  \n      this.addresses = await this.customerAddressService.load();\n      \n      if (this.addresses.length) {\n        this.showContentView();\n      } else {\n        this.showEmptyView();\n      }\n\n      this.onRefreshComplete();\n      \n    } catch (error) {\n      this.showErrorView();\n      this.onRefreshComplete();\n      this.translate.get('ERROR_NETWORK').subscribe((str) => this.showToast(str));\n    }\n  }\n\n  async onDeleteAddress(address: CustomerAddress) {\n\n    try {\n\n      const str = await this.translate.get('DELETE_CONFIRMATION').toPromise();\n\n      const res = await this.showConfirm(str);\n\n      if (!res) return;\n  \n      await this.showLoadingView({ showOverlay: false });\n  \n      await address.destroy();\n  \n      let index = this.addresses.indexOf(address);\n      if (index !== -1) this.addresses.splice(index, 1);\n\n      if (this.addresses.length) {\n        this.showContentView();\n      } else {\n        this.showEmptyView();\n      }\n      \n      this.translate.get('DELETED').subscribe(str => this.showToast(str));\n      \n    } catch (error) {\n      this.showContentView();\n      this.translate.get('ERROR_NETWORK').subscribe(str => this.showToast(str));\n    }\n\n  }\n\n  async onAddButtonTouched() {\n\n    await this.showLoadingView({ showOverlay: true });\n    \n    const modal = await this.modalCtrl.create({\n      component: AddressAddPage\n    });\n    \n    await modal.present();\n\n    this.dismissLoadingView();\n\n    const { data } = await modal.onWillDismiss();\n    \n    if (data) {\n      this.addresses.unshift(data);\n      this.showContentView();\n    }\n  }\n\n}\n"]}