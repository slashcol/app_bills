{"version":3,"sources":["webpack:///src/app/pages/search/search.module.ts","webpack:///src/app/pages/search/search.html","webpack:///src/app/pages/search/search.ts"],"names":["SearchPageModule","forChild","path","component","declarations","imports","SearchPage","injector","itemService","items","params","limit","skeletonArray","Array","setupObservable","subscribeToQueryParams","activatedRoute","queryParams","subscribe","query","q","searchTerm","tag","toLowerCase","showLoadingView","showOverlay","loadData","contentLoaded","loadAndScroll","container","ionScroll","setTimeout","next","getTrans","title","setPageTitle","setMetaTags","event","refresher","target","load","length","showContentView","showEmptyView","onContentLoaded","onRefreshComplete","translate","get","str","showToast","key","value","navigateToRelative","index","item","id","onSearch","opacity","transform","optional","selector","templateUrl","styleUrls","animations"],"mappings":"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","file":"pages-search-search-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { SearchPage } from './search';\nimport { SharedModule } from '../../shared.module';\n\n@NgModule({\n  declarations: [\n    SearchPage,\n  ],\n  imports: [\n    RouterModule.forChild([\n      {\n        path: '',\n        component: SearchPage\n      }\n    ]),\n    SharedModule,\n  ],\n})\nexport class SearchPageModule {}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar fixed>\n    <ion-buttons slot=\"start\">\n      <ion-back-button></ion-back-button>\n    </ion-buttons>\n    <ion-searchbar mode=\"ios\" showCancelButton=\"never\" [placeholder]=\"'SEARCH_PLACEHOLDER' | translate\"\n      [value]=\"searchTerm\" (keyup)=\"onSearch($event)\">\n    </ion-searchbar>\n    <ion-buttons slot=\"end\" *ngIf=\"preference.cartCount\">\n      <ion-button fill=\"clear\" (click)=\"goToCartPage()\">\n        <ion-icon slot=\"start\" name=\"cart\"></ion-icon>\n        <span>{{ preference.cartCount }}</span>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content scrollEvents=\"true\">\n\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"loadData($event)\">\n    <ion-refresher-content pullingText=\"{{ 'PULL_TO_REFRESH' | translate }}\"\n      refreshingText=\"{{ 'REFRESHING' | translate }}\">\n    </ion-refresher-content>\n  </ion-refresher>\n\n  <ion-grid fixed>\n\n    <empty-view *ngIf=\"isErrorViewVisible\" icon=\"alert-circle-outline\" [text]=\"'ERROR_DATA' | translate\">\n    </empty-view>\n\n    <empty-view *ngIf=\"isEmptyViewVisible\" image=\"./assets/imgs/undraw_search.svg\" imageWidth=\"100\"\n      [text]=\"'EMPTY_DATA' | translate\">\n    </empty-view>\n    \n    <ion-list [@staggerIn]=\"items.length\" *ngIf=\"isContentViewVisible\">\n      <ion-row>\n        <ion-col size-xs=\"6\" size-sm=\"4\" size-md=\"4\" size-lg=\"3\" *ngFor=\"let item of items;trackBy:trackByFn\">\n          <app-shop-item [item]=\"item\" [customObservable]=\"loadAndScroll\" [routerLink]=\"['/1/home/items/' + item.slug]\">\n          </app-shop-item>\n        </ion-col>\n      </ion-row>\n    </ion-list>\n\n    <ion-row *ngIf=\"isLoadingViewVisible\">\n      <ion-col size-xs=\"6\" size-sm=\"4\" size-md=\"4\" size-lg=\"3\" *ngFor=\"let item of skeletonArray\">\n        <ngx-skeleton-loader count=\"1\" appearance=\"circle\"\n          [theme]=\"{ width: '100%', height: '240px', 'border-radius': '0' }\">\n        </ngx-skeleton-loader>\n      </ion-col>\n    </ion-row>\n\n  </ion-grid>\n\n</ion-content>","import { Component, Injector, ViewChild, OnInit } from '@angular/core';\nimport { IonContent } from '@ionic/angular';\nimport { BasePage } from '../base-page/base-page';\nimport { Item } from '../../services/item';\nimport { Subject, Observable, merge } from 'rxjs';\nimport {\n  trigger,\n  style,\n  animate,\n  transition,\n  query,\n  stagger\n} from '@angular/animations';\n\n@Component({\n  selector: 'page-search',\n  templateUrl: 'search.html',\n  styleUrls: ['search.scss'],\n  animations: [\n    trigger('staggerIn', [\n      transition('* => *', [\n        query(':enter', style({ opacity: 0, transform: `translate3d(0,10px,0)` }), { optional: true }),\n        query(':enter', stagger('100ms', [animate('300ms', style({ opacity: 1, transform: `translate3d(0,0,0)` }))]), { optional: true })\n      ])\n    ])\n  ]\n})\nexport class SearchPage extends BasePage implements OnInit {\n\n  @ViewChild(IonContent, { static: true }) container: IonContent;\n\n  public items: Item[] = [];\n  public params: any = {\n    limit: 100\n  };\n  public skeletonArray = Array(32);\n  public searchTerm: string;\n\n  public contentLoaded: Subject<any>;\n  public loadAndScroll: Observable<any>;\n\n  constructor(injector: Injector, private itemService: Item) {\n    super(injector);\n  }\n\n  enableMenuSwipe(): boolean {\n    return false;\n  }\n\n  ngOnInit() {\n    this.setupObservable();\n    this.subscribeToQueryParams();\n  }\n\n  subscribeToQueryParams() {\n    \n    this.activatedRoute.queryParams.subscribe(queryParams => {\n\n      const query = queryParams.q;\n\n      if (query) {\n        this.searchTerm = query;\n        this.params.tag = query.toLowerCase();\n        this.items = [];\n        this.showLoadingView({ showOverlay: false });\n        this.loadData();\n      }\n\n    });\n  }\n\n  setupObservable() {\n\n    this.contentLoaded = new Subject();\n\n    this.loadAndScroll = merge(\n      this.container.ionScroll,\n      this.contentLoaded,\n    );\n  }\n\n  onContentLoaded() {\n    setTimeout(() => {\n      this.contentLoaded.next();\n    }, 600);\n  }\n\n  async ionViewDidEnter() {\n\n    const title = await this.getTrans('SEARCH');\n    this.setPageTitle(title);\n\n    this.setMetaTags({\n      title: title\n    });\n  }\n\n  async loadData(event: any = {}) {\n\n    try {\n\n      this.refresher = event.target;\n\n      this.items = await this.itemService.load(this.params);\n\n      if (this.items.length) {\n        this.showContentView();\n      } else {\n        this.showEmptyView();\n      }\n\n      this.onContentLoaded();\n\n      this.onRefreshComplete(this.items);\n\n    } catch (error) {\n      this.showContentView();\n      this.onRefreshComplete();\n      this.translate.get('ERROR_NETWORK').subscribe((str) => this.showToast(str));\n    }\n\n  }\n\n  onSearch(event: any = {}) {\n    if (event.key === \"Enter\") {\n      const query = event.target.value;\n      this.navigateToRelative('./', { q: query });\n    }\n  }\n\n  trackByFn(index: number, item: any) {\n    if (!item) return null;\n    return item.id;\n  }\n\n}\n"]}