{"version":3,"sources":["./src/app/pages/review-list/review-list.module.ts","./src/app/pages/review-list/review-list.ts","./src/app/pages/review-list/review-list.html"],"names":[],"mappings":"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","file":"pages-review-list-review-list-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { ReviewListPage } from './review-list';\nimport { SharedModule } from '../../shared.module';\n \n@NgModule({\n  declarations: [\n    ReviewListPage,\n  ],\n  imports: [\n    SharedModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: ReviewListPage\n      }\n    ])\n  ]\n})\nexport class ReviewListPageModule {}\n","\nimport { Component, Injector, ViewChild } from '@angular/core';\nimport { Review } from '../../services/review';\nimport { Item } from 'src/app/services/item';\nimport { BasePage } from '../base-page/base-page';\nimport { IonContent } from '@ionic/angular';\nimport { Subject, Observable, merge } from 'rxjs';\nimport {\n  trigger,\n  style,\n  animate,\n  transition,\n  query,\n  stagger\n} from '@angular/animations';\n\n@Component({\n  selector: 'page-review-list',\n  templateUrl: 'review-list.html',\n  styleUrls: ['review-list.scss'],\n  animations: [\n    trigger('staggerIn', [\n      transition('* => *', [\n        query(':enter', style({ opacity: 0, transform: `translate3d(0,10px,0)` }), { optional: true }),\n        query(':enter', stagger('100ms', [animate('300ms', style({ opacity: 1, transform: `translate3d(0,0,0)` }))]), { optional: true })\n      ])\n    ])\n  ]\n})\nexport class ReviewListPage extends BasePage {\n\n  @ViewChild(IonContent) content: IonContent;\n\n  protected contentLoaded: Subject<any>;\n  protected loadAndScroll: Observable<any>;\n\n  public reviews: Review[] = [];\n  public params: any = {};\n  public skeletonReviews: Array<any>;\n\n  constructor(injector: Injector, private reviewService: Review) {\n    super(injector);\n    this.params = Object.assign({}, this.getParams());\n    this.params.limit = 20;\n    this.params.page = 0;\n    this.skeletonReviews = Array(10);\n  }\n\n  enableMenuSwipe() {\n    return false;\n  }\n\n  onContentLoaded() {\n    setTimeout(() => {\n      this.contentLoaded.next();\n    }, 400);\n  }\n\n  async ionViewDidEnter() {\n\n    this.contentLoaded = new Subject();\n\n    this.loadAndScroll = merge(\n      this.content.ionScroll,\n      this.contentLoaded\n    );\n\n    await this.showLoadingView({ showOverlay: false });\n\n    if (this.params.itemId) {\n      this.params.item = await this.loadItem();\n\n      const str = await this.getTrans('REVIEWS');\n\n      const title = this.params.item.name + ' - ' + str;\n      this.setPageTitle(title);\n\n      this.setMetaTags({\n        title: title\n      });\n    }\n\n    this.loadData();\n  }\n\n  async loadItem() {\n    const item = new Item;\n    item.id = this.params.itemId;\n    return await item.fetch();\n  }\n\n  async loadData() {\n\n    try {\n\n      const reviews = await this.reviewService.load(this.params);\n      \n      for (let review of reviews) {\n        this.reviews.push(review);\n      }\n\n      if (this.reviews.length) {\n        this.showContentView();\n      } else {\n        this.showEmptyView();\n      }\n      \n      this.onContentLoaded();\n      this.onRefreshComplete(reviews);\n      \n    } catch (error) {\n\n      if (this.reviews.length) {\n        this.showContentView();\n      } else {\n        this.showErrorView();\n      }\n\n      this.onRefreshComplete();\n\n      let message = await this.getTrans('ERROR_NETWORK');\n      this.showToast(message);\n    }\n  }\n\n  onLoadMore(event: any = {}) {\n    this.infiniteScroll = event.target;\n    this.params.page++;\n    this.loadData();\n  }\n\n  onReload(event: any = {}) {\n    this.refresher = event.target;\n    this.reviews = [];\n    this.params.page = 0;\n    this.loadData();\n  }\n\n  trackByFn(index: number, item: any) {\n    if (!item) return null;\n    return item.id;\n  }\n\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar fixed>\n    <ion-buttons slot=\"start\">\n      <ion-back-button></ion-back-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content scrollEvents=\"true\">\n\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"onReload($event)\">\n    <ion-refresher-content pullingText=\"{{ 'PULL_TO_REFRESH' | translate }}\"\n      refreshingText=\"{{ 'REFRESHING' | translate }}\">\n    </ion-refresher-content>\n  </ion-refresher>\n\n  <ion-grid fixed>\n\n    <empty-view *ngIf=\"isErrorViewVisible\" icon=\"alert-circle-outline\" [text]=\"'ERROR_REVIEWS' | translate\">\n    </empty-view>\n\n    <empty-view *ngIf=\"isEmptyViewVisible\" icon=\"star\" [text]=\"'EMPTY_REVIEWS' | translate\">\n    </empty-view>\n\n    <ion-row class=\"ion-justify-content-center\">\n      <ion-col size-xs=\"12\" size-lg=\"10\">\n\n        <section *ngIf=\"isLoadingViewVisible\">\n          <div class=\"skeleton-item light-bg radius\" *ngFor=\"let item of skeletonReviews\">\n            <div class=\"wrapper\">\n              <div class=\"avatar\">\n                <ngx-skeleton-loader appearance=\"circle\" [theme]=\"{ width: '80px', height: '80px' }\">\n                </ngx-skeleton-loader>\n              </div>\n              <div class=\"title\">\n                <div>\n                  <ngx-skeleton-loader\n                    [theme]=\"{ width: '30%', 'border-radius': '0', height: '15px', 'margin-bottom': '10px'}\">\n                  </ngx-skeleton-loader>\n                </div>\n                <div>\n                  <ngx-skeleton-loader [theme]=\"{ width: '70%', 'border-radius': '0', height: '15px' }\">\n                  </ngx-skeleton-loader>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <ion-list lines=\"none\" [@staggerIn]=\"reviews.length\" *ngIf=\"isContentViewVisible\">\n          <div class=\"ion-margin-bottom ion-padding\" *ngFor=\"let review of reviews;trackBy:trackByFn\">\n            <ion-item class=\"ion-no-padding\">\n\n              <ion-avatar slot=\"start\">\n                <img defaultImage=\"./assets/imgs/avatar.png\" [lazyLoad]=\"review.user?.photo?.url()\"\n                  [customObservable]=\"loadAndScroll\" />\n              </ion-avatar>\n\n              <ion-label>\n                <ion-text color=\"dark\">\n                  <p class=\"no-margin\">\n                    {{ review.user?.name || ('GUEST' | translate) }}\n                  </p>\n                </ion-text>\n                <ion-text color=\"medium\">\n                  <p class=\"text-medium\">\n                    {{ review.createdAt | dateGlobal:'mediumDate' }}\n                  </p>\n                </ion-text>\n                <bar-rating [rate]=\"review.rating\" [readOnly]=\"true\" [max]=\"5\" [theme]=\"'stars'\">\n                </bar-rating>\n              </ion-label>\n            </ion-item>\n            <div>\n              <ion-text color=\"dark\">\n                <p class=\"no-margin\">{{ review.comment }}</p>\n              </ion-text>\n            </div>\n          </div>\n        </ion-list>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n  <ion-infinite-scroll *ngIf=\"isContentViewVisible\" (ionInfinite)=\"onLoadMore($event)\">\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n\n</ion-content>"],"sourceRoot":"webpack:///"}