{"version":3,"sources":["./src/app/pages/search/search.module.ts","./src/app/pages/search/search.ts","./src/app/pages/search/search.html"],"names":[],"mappings":"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","file":"pages-search-search-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { SearchPage } from './search';\nimport { SharedModule } from '../../shared.module';\n\n@NgModule({\n  declarations: [\n    SearchPage,\n  ],\n  imports: [\n    RouterModule.forChild([\n      {\n        path: '',\n        component: SearchPage\n      }\n    ]),\n    SharedModule,\n  ],\n})\nexport class SearchPageModule {}\n","import { Component, Injector, ViewChild, OnInit } from '@angular/core';\nimport { IonContent } from '@ionic/angular';\nimport { BasePage } from '../base-page/base-page';\nimport { Item } from '../../services/item';\nimport { Subject, Observable, merge } from 'rxjs';\nimport {\n  trigger,\n  style,\n  animate,\n  transition,\n  query,\n  stagger\n} from '@angular/animations';\n\n@Component({\n  selector: 'page-search',\n  templateUrl: 'search.html',\n  styleUrls: ['search.scss'],\n  animations: [\n    trigger('staggerIn', [\n      transition('* => *', [\n        query(':enter', style({ opacity: 0, transform: `translate3d(0,10px,0)` }), { optional: true }),\n        query(':enter', stagger('100ms', [animate('300ms', style({ opacity: 1, transform: `translate3d(0,0,0)` }))]), { optional: true })\n      ])\n    ])\n  ]\n})\nexport class SearchPage extends BasePage implements OnInit {\n\n  @ViewChild(IonContent, { static: true }) container: IonContent;\n\n  public items: Item[] = [];\n  public params: any = {\n    limit: 100\n  };\n  public skeletonArray = Array(32);\n  public searchTerm: string;\n\n  public contentLoaded: Subject<any>;\n  public loadAndScroll: Observable<any>;\n\n  constructor(injector: Injector, private itemService: Item) {\n    super(injector);\n  }\n\n  enableMenuSwipe(): boolean {\n    return false;\n  }\n\n  ngOnInit() {\n    this.setupObservable();\n    this.subscribeToQueryParams();\n  }\n\n  subscribeToQueryParams() {\n    \n    this.activatedRoute.queryParams.subscribe(queryParams => {\n\n      const query = queryParams.q;\n\n      if (query) {\n        this.searchTerm = query;\n        this.params.tag = query.toLowerCase();\n        this.items = [];\n        this.showLoadingView({ showOverlay: false });\n        this.loadData();\n      }\n\n    });\n  }\n\n  setupObservable() {\n\n    this.contentLoaded = new Subject();\n\n    this.loadAndScroll = merge(\n      this.container.ionScroll,\n      this.contentLoaded,\n    );\n  }\n\n  onContentLoaded() {\n    setTimeout(() => {\n      this.contentLoaded.next();\n    }, 600);\n  }\n\n  async ionViewDidEnter() {\n\n    const title = await this.getTrans('SEARCH');\n    this.setPageTitle(title);\n\n    this.setMetaTags({\n      title: title\n    });\n  }\n\n  async loadData(event: any = {}) {\n\n    try {\n\n      this.refresher = event.target;\n\n      this.items = await this.itemService.load(this.params);\n\n      if (this.items.length) {\n        this.showContentView();\n      } else {\n        this.showEmptyView();\n      }\n\n      this.onContentLoaded();\n\n      this.onRefreshComplete(this.items);\n\n    } catch (error) {\n      this.showContentView();\n      this.onRefreshComplete();\n      this.translate.get('ERROR_NETWORK').subscribe((str) => this.showToast(str));\n    }\n\n  }\n\n  onSearch(event: any = {}) {\n    if (event.key === \"Enter\") {\n      const query = event.target.value;\n      this.navigateToRelative('./', { q: query });\n    }\n  }\n\n  trackByFn(index: number, item: any) {\n    if (!item) return null;\n    return item.id;\n  }\n\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar fixed>\n    <ion-buttons slot=\"start\">\n      <ion-back-button></ion-back-button>\n    </ion-buttons>\n    <ion-searchbar mode=\"ios\" showCancelButton=\"never\" [placeholder]=\"'SEARCH_PLACEHOLDER' | translate\"\n      [value]=\"searchTerm\" (keyup)=\"onSearch($event)\">\n    </ion-searchbar>\n    <ion-buttons slot=\"end\" *ngIf=\"preference.cartCount\">\n      <ion-button fill=\"clear\" (click)=\"goToCartPage()\">\n        <ion-icon slot=\"start\" name=\"cart\"></ion-icon>\n        <span>{{ preference.cartCount }}</span>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content scrollEvents=\"true\">\n\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"loadData($event)\">\n    <ion-refresher-content pullingText=\"{{ 'PULL_TO_REFRESH' | translate }}\"\n      refreshingText=\"{{ 'REFRESHING' | translate }}\">\n    </ion-refresher-content>\n  </ion-refresher>\n\n  <ion-grid fixed>\n\n    <empty-view *ngIf=\"isErrorViewVisible\" icon=\"alert-circle-outline\" [text]=\"'ERROR_DATA' | translate\">\n    </empty-view>\n\n    <empty-view *ngIf=\"isEmptyViewVisible\" image=\"./assets/imgs/undraw_search.svg\" imageWidth=\"100\"\n      [text]=\"'EMPTY_DATA' | translate\">\n    </empty-view>\n    \n    <ion-list [@staggerIn]=\"items.length\" *ngIf=\"isContentViewVisible\">\n      <ion-row>\n        <ion-col size-xs=\"6\" size-sm=\"4\" size-md=\"4\" size-lg=\"3\" *ngFor=\"let item of items;trackBy:trackByFn\">\n          <app-shop-item [item]=\"item\" [customObservable]=\"loadAndScroll\" [routerLink]=\"['/1/home/items/' + item.slug]\">\n          </app-shop-item>\n        </ion-col>\n      </ion-row>\n    </ion-list>\n\n    <ion-row *ngIf=\"isLoadingViewVisible\">\n      <ion-col size-xs=\"6\" size-sm=\"4\" size-md=\"4\" size-lg=\"3\" *ngFor=\"let item of skeletonArray\">\n        <ngx-skeleton-loader count=\"1\" appearance=\"circle\"\n          [theme]=\"{ width: '100%', height: '240px', 'border-radius': '0' }\">\n        </ngx-skeleton-loader>\n      </ion-col>\n    </ion-row>\n\n  </ion-grid>\n\n</ion-content>"],"sourceRoot":"webpack:///"}